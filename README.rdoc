= Redmine Table-Of-Contents plug-in

This plug-in allows to order Wiki pages and adds a macro to display the table of contents of Wiki pages in the specified order. Also it changes the way links to Wiki pages displayed by adding a number like "1.1.2." to the title of the page.

== Compatibility

This plug-in is compatible with Redmine >= 2.0.0

== Installation And Configuration

From a ZIP file:
* Download the latest version of the plugin
* Unzip to */plugins* folder of Redmine

From a GIT repository:
* Clone repository with <b>git clone git://git.academ.org/redmine_wiki_toc.git plugins/redmine_wiki_toc</b> command

Patch Redmine (optional):
* Use <b>wiki_links_with_pretty_title.patch</b> to force Redmine to use formatted title for Wiki links (so the [[Wiki TOC plug-in]] transforms to "1.1.2. Wiki TOC plug-in"). This is a tiny patch, it should not break anything.

After download:
1. Run <b>rake redmine:plugins:migrate</b>.
2. Restart Redmine.
3. Enable <b>"Table of contents of Wiki"</b> module for projects you need.
4. Setup *permissions* for roles

Available permissions:
* Reorder wiki pages
* View table of contents of Wiki -- enable it if you have "View wiki pages" permission enabled

== Macro {{wiki_toc}} usage

Displays a table of contents of Wiki pages. It works like {{child_pages}} macro, but shows pages in the order specified by the user. With no argument, it displays the child pages of the current wiki page. Examples:

* <b>{{wiki_toc}}</b> -- can be used from a wiki page only
* <b>{{wiki_toc(Foo)}}</b> -- lists all children of page Foo
* <b>{{wiki_toc(Foo, parent=1)}}</b> -- shows a higher level of the page hierarchy including Foo and all Foo's children
* <b>{{wiki_toc(Foo, depth=1)}}</b> -- lists all children of page Foo down to specified depth
* <b>{{wiki_toc(reorder=1)}}</b> -- shows reorder links
* <b>{{wiki_toc(highlight=1)}}</b> -- highlight current or specified page
* <b>{{wiki_toc(header=Table of contents)}}</b> -- shows header with a link to the table of contents
* <b>{{wiki_toc(root=1)}}</b> -- shows entire page hierarchy from root

This macro has a special behavior when added to the sidebar. It follows Wiki pages you are currently viewing. There is simple recipe for adding table of contents to sidebar:
# Create a Wiki page with the name *Sidebar*, if it is not created yet.
# Clear the default page content.
# Copy & paste: <b>{{wiki_toc(header=Table of contents, highlight=1, parent=1, depth=1)</b>

A header (<code><h3></code>) generated by the macro is +a link+ to the table of contents.

== Macro {{toc_link}} usage

It displays a link to the table of contents with the title specified in the argument. Example: <b>{{toc_link(Go to the table of contents)}}</b>

== Macro {{title}} usage

It adds a formatted (i.e. prefixed with a number like "4.3.") Wiki title to the page.

== Ordering Wiki pages

Click a link, generated by {{wiki_toc}} or {{toc_link}} macros, and you will end up with the page where you can order pages (if you have appropriate permissions).
Click the arrows to move the page higher, lower, to the top or to the bottom of the section (among the children of the parent page).
If you need to move the page to another section (change the parent), open it and then click *Rename* button.

== Changelog

[0.0.1] Initial commit
